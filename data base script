
CREATE TABLE UserAccount (
    User_ID INT PRIMARY KEY IDENTITY(1,1),
    FullName VARCHAR(100) NOT NULL,
    Email VARCHAR(100) UNIQUE NOT NULL,
    Password VARCHAR(100) NOT NULL,
    User_Type VARCHAR(10) CHECK (User_Type IN ('admin', 'user')) NOT NULL
);




CREATE TABLE Customer (
    Customer_ID INT PRIMARY KEY IDENTITY,
    User_ID INT UNIQUE,
    Name VARCHAR(100),
    Address VARCHAR(200),
    Phone VARCHAR(20),
    RegistrationDate DATE DEFAULT GETDATE(),
    No_Visits INT DEFAULT 0,
    Last_Visited DATE,
    Money_Spent DECIMAL(10, 2) DEFAULT 0,
    IsFrequent BIT DEFAULT 0,
    FOREIGN KEY (User_ID) REFERENCES UserAccount(User_ID)
);

CREATE TABLE Admin (
    Admin_ID INT PRIMARY KEY IDENTITY,
    User_ID INT UNIQUE,
    Name VARCHAR(100),
    Phone VARCHAR(20),
    FOREIGN KEY (User_ID) REFERENCES UserAccount(User_ID)
);


CREATE TABLE Product (
    Product_ID INT PRIMARY KEY IDENTITY,
    Name VARCHAR(100),
    Type VARCHAR(50), -- Example: Food, Electronics
    Price DECIMAL(10, 2),
    Total_Sales INT DEFAULT 0,
    Monthly_Sales INT DEFAULT 0
);

ALTER TABLE Product
ADD Quantity INT NOT NULL DEFAULT 0;


CREATE TABLE Inventory (
    Product_ID INT PRIMARY KEY,
    Stock INT,
    Restock_Bool BIT DEFAULT 0,
    FOREIGN KEY (Product_ID) REFERENCES Product(Product_ID)
);


CREATE TABLE Orders (
    Order_ID INT PRIMARY KEY IDENTITY,
    Customer_ID INT,
    OrderDate DATE DEFAULT GETDATE(),
    FOREIGN KEY (Customer_ID) REFERENCES Customer(Customer_ID)
);


CREATE TABLE OrderDetails (
    Order_ID INT,
    Product_ID INT,
    Quantity INT,
    PRIMARY KEY (Order_ID, Product_ID),
    FOREIGN KEY (Order_ID) REFERENCES Orders(Order_ID),
    FOREIGN KEY (Product_ID) REFERENCES Product(Product_ID)
);


CREATE TABLE Invoice (
    Invoice_ID INT PRIMARY KEY IDENTITY,
    Order_ID INT UNIQUE,
    InvoiceDate DATE DEFAULT GETDATE(),
    Tax DECIMAL(5, 2),
    FinalAmount DECIMAL(10, 2),
    FOREIGN KEY (Order_ID) REFERENCES Orders(Order_ID)
);
